<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">/*
<span class='line'>  2</span>     Copyright 2008-2023
<span class='line'>  3</span>         Matthias Ehmann,
<span class='line'>  4</span>         Michael Gerhaeuser,
<span class='line'>  5</span>         Carsten Miller,
<span class='line'>  6</span>         Bianca Valentin,
<span class='line'>  7</span>         Alfred Wassermann,
<span class='line'>  8</span>         Peter Wilfahrt
<span class='line'>  9</span> 
<span class='line'> 10</span>     This file is part of JSXGraph.
<span class='line'> 11</span> 
<span class='line'> 12</span>     JSXGraph is free software dual licensed under the GNU LGPL or MIT License.
<span class='line'> 13</span> 
<span class='line'> 14</span>     You can redistribute it and/or modify it under the terms of the
<span class='line'> 15</span> 
<span class='line'> 16</span>       * GNU Lesser General Public License as published by
<span class='line'> 17</span>         the Free Software Foundation, either version 3 of the License, or
<span class='line'> 18</span>         (at your option) any later version
<span class='line'> 19</span>       OR
<span class='line'> 20</span>       * MIT License: https://github.com/jsxgraph/jsxgraph/blob/master/LICENSE.MIT
<span class='line'> 21</span> 
<span class='line'> 22</span>     JSXGraph is distributed in the hope that it will be useful,
<span class='line'> 23</span>     but WITHOUT ANY WARRANTY; without even the implied warranty of
<span class='line'> 24</span>     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<span class='line'> 25</span>     GNU Lesser General Public License for more details.
<span class='line'> 26</span> 
<span class='line'> 27</span>     You should have received a copy of the GNU Lesser General Public License and
<span class='line'> 28</span>     the MIT License along with JSXGraph. If not, see &lt;https://www.gnu.org/licenses/>
<span class='line'> 29</span>     and &lt;https://opensource.org/licenses/MIT/>.
<span class='line'> 30</span>  */</span><span class="WHIT">
<span class='line'> 31</span> 
<span class='line'> 32</span> </span><span class="COMM">/*global JXG: true, define: true, window: true*/</span><span class="WHIT">
<span class='line'> 33</span> </span><span class="COMM">/*jslint nomen: true, plusplus: true*/</span><span class="WHIT">
<span class='line'> 34</span> 
<span class='line'> 35</span> </span><span class="COMM">/**
<span class='line'> 36</span>  * @fileoverview In this file the Text element is defined.
<span class='line'> 37</span>  */</span><span class="WHIT">
<span class='line'> 38</span> 
<span class='line'> 39</span> </span><span class="NAME">import</span><span class="WHIT"> </span><span class="NAME">JXG</span><span class="WHIT"> </span><span class="NAME">from</span><span class="WHIT"> </span><span class="STRN">"../jxg"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 40</span> </span><span class="NAME">import</span><span class="WHIT"> </span><span class="NAME">Env</span><span class="WHIT"> </span><span class="NAME">from</span><span class="WHIT"> </span><span class="STRN">"../utils/env"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 41</span> </span><span class="NAME">import</span><span class="WHIT"> </span><span class="NAME">Type</span><span class="WHIT"> </span><span class="NAME">from</span><span class="WHIT"> </span><span class="STRN">"../utils/type"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 42</span> 
<span class='line'> 43</span> </span><span class="COMM">/**
<span class='line'> 44</span>  * @class
<span class='line'> 45</span>  * @ignore
<span class='line'> 46</span>  */</span><span class="WHIT">
<span class='line'> 47</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">priv</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 48</span> </span><span class="WHIT">     </span><span class="COMM">/**
<span class='line'> 49</span>      * @class
<span class='line'> 50</span>      * @ignore
<span class='line'> 51</span>      */</span><span class="WHIT">
<span class='line'> 52</span> 
<span class='line'> 53</span> </span><span class="WHIT">    </span><span class="NAME">InputInputEventHandler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">evt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 54</span> </span><span class="WHIT">        </span><span class="NAME">this._value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.rendNodeInput.value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 55</span> </span><span class="WHIT">        </span><span class="NAME">this.board.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 56</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 57</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 58</span> 
<span class='line'> 59</span> </span><span class="COMM">/**
<span class='line'> 60</span>  * @class This element is used to provide a constructor for special texts containing a
<span class='line'> 61</span>  * HTML form input element.
<span class='line'> 62</span>  * &lt;p>
<span class='line'> 63</span>  * If the width of element is set with the attribute "cssStyle", the width of the
<span class='line'> 64</span>  * label must be added.
<span class='line'> 65</span>  * &lt;p>
<span class='line'> 66</span>  * For this element, the attribute "display" has to have the value 'html' (which is the default).
<span class='line'> 67</span>  * &lt;p>
<span class='line'> 68</span>  * The underlying HTML input field can be accessed through the sub-object 'rendNodeInput', e.g. to
<span class='line'> 69</span>  * add event listeners.
<span class='line'> 70</span>  *
<span class='line'> 71</span>  * @pseudo
<span class='line'> 72</span>  * @name Input
<span class='line'> 73</span>  * @augments Text
<span class='line'> 74</span>  * @constructor
<span class='line'> 75</span>  * @type JXG.Text
<span class='line'> 76</span>  *
<span class='line'> 77</span>  * @param {number,function_number,function_String_String,function} x,y,value,label Parent elements for input elements.
<span class='line'> 78</span>  *   &lt;p>
<span class='line'> 79</span>  *   x and y are the coordinates of the lower left corner of the text box. The position of the text is fixed,
<span class='line'> 80</span>  *   x and y are numbers. The position is variable if x or y are functions.
<span class='line'> 81</span>  *   &lt;p>
<span class='line'> 82</span>  *   The default value of the input element must be given as string.
<span class='line'> 83</span>  *   &lt;p>
<span class='line'> 84</span>  *   The label of the input element may be given as string or function.
<span class='line'> 85</span>  *
<span class='line'> 86</span>  * @example
<span class='line'> 87</span>  *  // Create an input element at position [1,4].
<span class='line'> 88</span>  *  var input = board.create('input', [0, 1, 'sin(x)*x', 'f(x)='], {cssStyle: 'width: 100px'});
<span class='line'> 89</span>  *  var f = board.jc.snippet(input.Value(), true, 'x', false);
<span class='line'> 90</span>  *  var graph = board.create('functiongraph',[f,
<span class='line'> 91</span>  *          function() {
<span class='line'> 92</span>  *            var c = new JXG.Coords(JXG.COORDS_BY_SCREEN,[0,0],board);
<span class='line'> 93</span>  *            return c.usrCoords[1];
<span class='line'> 94</span>  *          },
<span class='line'> 95</span>  *          function() {
<span class='line'> 96</span>  *            var c = new JXG.Coords(JXG.COORDS_BY_SCREEN,[board.canvasWidth,0],board);
<span class='line'> 97</span>  *            return c.usrCoords[1];
<span class='line'> 98</span>  *          }
<span class='line'> 99</span>  *        ]);
<span class='line'>100</span>  *
<span class='line'>101</span>  *  board.create('text', [1, 3, '&lt;button onclick="updateGraph()"&gt;Update graph&lt;/button&gt;']);
<span class='line'>102</span>  *
<span class='line'>103</span>  *  var updateGraph = function() {
<span class='line'>104</span>  *      graph.Y = board.jc.snippet(input.Value(), true, 'x', false);
<span class='line'>105</span>  *      graph.updateCurve();
<span class='line'>106</span>  *      board.update();
<span class='line'>107</span>  *  }
<span class='line'>108</span>  * &lt;/pre>&lt;div class="jxgbox" id="JXGc70f55f1-21ba-4719-a37d-a93ae2943faa" style="width: 500px; height: 300px;">&lt;/div>
<span class='line'>109</span>  * &lt;script type="text/javascript">
<span class='line'>110</span>  *   var t1_board = JXG.JSXGraph.initBoard('JXGc70f55f1-21ba-4719-a37d-a93ae2943faa', {boundingbox: [-3, 6, 5, -3], axis: true, showcopyright: false, shownavigation: false});
<span class='line'>111</span>  *   var input = t1_board.create('input', [1, 4, 'sin(x)*x', 'f(x)='], {cssStyle: 'width: 100px'});
<span class='line'>112</span>  *   var f = t1_board.jc.snippet(input.Value(), true, 'x', false);
<span class='line'>113</span>  *   var graph = t1_board.create('functiongraph',[f,
<span class='line'>114</span>  *          function() {
<span class='line'>115</span>  *            var c = new JXG.Coords(JXG.COORDS_BY_SCREEN,[0,0],t1_board);
<span class='line'>116</span>  *            return c.usrCoords[1];
<span class='line'>117</span>  *          },
<span class='line'>118</span>  *          function() {
<span class='line'>119</span>  *            var c = new JXG.Coords(JXG.COORDS_BY_SCREEN,[t1_board.canvasWidth,0],t1_board);
<span class='line'>120</span>  *            return c.usrCoords[1];
<span class='line'>121</span>  *          }
<span class='line'>122</span>  *        ]);
<span class='line'>123</span>  *
<span class='line'>124</span>  *  t1_board.create('text', [1, 3, '&lt;button onclick="updateGraph()">Update graph&lt;/button>']);
<span class='line'>125</span>  *
<span class='line'>126</span>  *  var updateGraph = function() {
<span class='line'>127</span>  *      graph.Y = t1_board.jc.snippet(input.Value(), true, 'x', false);
<span class='line'>128</span>  *      graph.updateCurve();
<span class='line'>129</span>  *      t1_board.update();
<span class='line'>130</span>  *  }
<span class='line'>131</span>  * &lt;/script>&lt;pre>
<span class='line'>132</span>  *
<span class='line'>133</span>  * @example
<span class='line'>134</span>  * // Add the `keyup` event to an input field
<span class='line'>135</span>  * var A = board.create('point', [3, -2]);
<span class='line'>136</span>  * var i = board.create('input', [-4, -4, "1", "x "]);
<span class='line'>137</span>  *
<span class='line'>138</span>  * i.rendNodeInput.addEventListener("keyup", ( function () {
<span class='line'>139</span>  *    var x = parseFloat(this.value);
<span class='line'>140</span>  *    if (!isNaN(x)) {
<span class='line'>141</span>  * 	   A.moveTo([x, 3], 100);
<span class='line'>142</span>  *    }
<span class='line'>143</span>  * }));
<span class='line'>144</span>  *
<span class='line'>145</span>  * &lt;/pre>&lt;div id="JXG81c84fa7-3f36-4874-9e0f-d4b9e93e755b" class="jxgbox" style="width: 300px; height: 300px;">&lt;/div>
<span class='line'>146</span>  * &lt;script type="text/javascript">
<span class='line'>147</span>  *     (function() {
<span class='line'>148</span>  *         var board = JXG.JSXGraph.initBoard('JXG81c84fa7-3f36-4874-9e0f-d4b9e93e755b',
<span class='line'>149</span>  *             {boundingbox: [-5, 5, 5, -5], axis: true, showcopyright: false, shownavigation: false});
<span class='line'>150</span>  *     var A = board.create('point', [3, -2]);
<span class='line'>151</span>  *     var i = board.create('input', [-4, -4, "1", "x "]);
<span class='line'>152</span>  *
<span class='line'>153</span>  *     i.rendNodeInput.addEventListener("keyup", ( function () {
<span class='line'>154</span>  *        var x = parseFloat(this.value);
<span class='line'>155</span>  *        if (!isNaN(x)) {
<span class='line'>156</span>  *     	    A.moveTo([x, 3], 100);
<span class='line'>157</span>  *        }
<span class='line'>158</span>  *     }));
<span class='line'>159</span>  *
<span class='line'>160</span>  *     })();
<span class='line'>161</span>  *
<span class='line'>162</span>  * &lt;/script>&lt;pre>
<span class='line'>163</span>  *
<span class='line'>164</span>  * @example
<span class='line'>165</span>  * // Add the `change` event to an input field
<span class='line'>166</span>  * var A = board.create('point', [3, -2]);
<span class='line'>167</span>  * var i = board.create('input', [-4, -4, "1", "x "]);
<span class='line'>168</span>  *
<span class='line'>169</span>  * i.rendNodeInput.addEventListener("change", ( function () {
<span class='line'>170</span>  *    var x = parseFloat(i.Value());
<span class='line'>171</span>  *    A.moveTo([x, 2], 100);
<span class='line'>172</span>  * }));
<span class='line'>173</span>  *
<span class='line'>174</span>  * &lt;/pre>&lt;div id="JXG51c4d78b-a7ad-4c34-a983-b3ddae6192d7" class="jxgbox" style="width: 300px; height: 300px;">&lt;/div>
<span class='line'>175</span>  * &lt;script type="text/javascript">
<span class='line'>176</span>  *     (function() {
<span class='line'>177</span>  *         var board = JXG.JSXGraph.initBoard('JXG51c4d78b-a7ad-4c34-a983-b3ddae6192d7',
<span class='line'>178</span>  *             {boundingbox: [-8, 8, 8,-8], axis: true, showcopyright: false, shownavigation: false});
<span class='line'>179</span>  *     var A = board.create('point', [3, -2]);
<span class='line'>180</span>  *     var i = board.create('input', [-4, -4, "1", "x "]);
<span class='line'>181</span>  *
<span class='line'>182</span>  *     i.rendNodeInput.addEventListener("change", ( function () {
<span class='line'>183</span>  *        var x = parseFloat(i.Value());
<span class='line'>184</span>  *        A.moveTo([x, 2], 100);
<span class='line'>185</span>  *     }));
<span class='line'>186</span>  *
<span class='line'>187</span>  *     })();
<span class='line'>188</span>  *
<span class='line'>189</span>  * &lt;/script>&lt;pre>
<span class='line'>190</span>  *
<span class='line'>191</span>  *
<span class='line'>192</span>  * @example
<span class='line'>193</span>  *   Apply CSS classes to label and input tag
<span class='line'>194</span>  *     &lt;style&gt;
<span class='line'>195</span>  *         div.JXGtext_inp {
<span class='line'>196</span>  *             font-weight: bold;
<span class='line'>197</span>  *         }
<span class='line'>198</span>  *
<span class='line'>199</span>  *         // Label
<span class='line'>200</span>  *         div.JXGtext_inp > span > span {
<span class='line'>201</span>  *             padding: 3px;
<span class='line'>202</span>  *         }
<span class='line'>203</span>  *
<span class='line'>204</span>  *         // Input field
<span class='line'>205</span>  *         div.JXGtext_inp > span > input {
<span class='line'>206</span>  *             width: 100px;
<span class='line'>207</span>  *             border: solid 4px red;
<span class='line'>208</span>  *             border-radius: 25px;
<span class='line'>209</span>  *         }
<span class='line'>210</span>  *     &lt;/style&gt;
<span class='line'>211</span>  *
<span class='line'>212</span>  * var inp = board.create('input', [-6, 1, 'x', 'y'], {
<span class='line'>213</span>  *      CssClass: 'JXGtext_inp', HighlightCssClass: 'JXGtext_inp'
<span class='line'>214</span>  * });
<span class='line'>215</span>  *
<span class='line'>216</span>  * &lt;/pre>
<span class='line'>217</span>  *         &lt;style>
<span class='line'>218</span>  *             div.JXGtext_inp {
<span class='line'>219</span>  *                 font-weight: bold;
<span class='line'>220</span>  *             }
<span class='line'>221</span>  *
<span class='line'>222</span>  *             div.JXGtext_inp > span > span {
<span class='line'>223</span>  *                 padding: 3px;
<span class='line'>224</span>  *             }
<span class='line'>225</span>  *
<span class='line'>226</span>  *             div.JXGtext_inp > span > input {
<span class='line'>227</span>  *                 width: 100px;
<span class='line'>228</span>  *                 border: solid 4px red;
<span class='line'>229</span>  *                 border-radius: 25px;
<span class='line'>230</span>  *             }
<span class='line'>231</span>  *         &lt;/style>
<span class='line'>232</span>  * &lt;div id="JXGa3642ebd-a7dc-41ac-beb2-0c9e705ab8b4" class="jxgbox" style="width: 300px; height: 300px;">&lt;/div>
<span class='line'>233</span>  * &lt;script type="text/javascript">
<span class='line'>234</span>  *     (function() {
<span class='line'>235</span>  *         var board = JXG.JSXGraph.initBoard('JXGa3642ebd-a7dc-41ac-beb2-0c9e705ab8b4',
<span class='line'>236</span>  *             {boundingbox: [-8, 8, 8,-8], axis: true, showcopyright: false, shownavigation: false});
<span class='line'>237</span>  *         var inp = board.create('input', [-6, 1, 'x', 'y'], {CssClass: 'JXGtext_inp', HighlightCssClass: 'JXGtext_inp'});
<span class='line'>238</span>  *
<span class='line'>239</span>  *     })();
<span class='line'>240</span>  * &lt;/script>&lt;pre>
<span class='line'>241</span>  *
<span class='line'>242</span>  */</span><span class="WHIT">
<span class='line'>243</span> </span><span class="NAME">JXG.createInput</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">board</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parents</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">attributes</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>244</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>245</span> </span><span class="WHIT">        </span><span class="NAME">par</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>246</span> </span><span class="WHIT">        </span><span class="NAME">attr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Type.copyAttributes</span><span class="PUNC">(</span><span class="NAME">attributes</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">board.options</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>247</span> 
<span class='line'>248</span> </span><span class="WHIT">    </span><span class="NAME">par</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="WHIT">
<span class='line'>249</span> </span><span class="WHIT">        </span><span class="NAME">parents</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>250</span> </span><span class="WHIT">        </span><span class="NAME">parents</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>251</span> </span><span class="WHIT">        </span><span class="STRN">'&lt;span style="display:inline; white-space:nowrap; padding:0px;">'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>252</span> </span><span class="WHIT">            </span><span class="STRN">'&lt;span>&lt;/span>&lt;input type="text" maxlength="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>253</span> </span><span class="WHIT">            </span><span class="NAME">attr.maxlength</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>254</span> </span><span class="WHIT">            </span><span class="STRN">'" style="width:100%"/>'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>255</span> </span><span class="WHIT">            </span><span class="STRN">"&lt;/span>"</span><span class="WHIT">
<span class='line'>256</span> </span><span class="WHIT">    </span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>257</span> 
<span class='line'>258</span> </span><span class="WHIT">    </span><span class="COMM">// 1. Create input element with empty label</span><span class="WHIT">
<span class='line'>259</span> </span><span class="WHIT">    </span><span class="NAME">t</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">board.create</span><span class="PUNC">(</span><span class="STRN">"text"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">par</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">attr</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>260</span> </span><span class="WHIT">    </span><span class="NAME">t.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Type.OBJECT_TYPE_INPUT</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>261</span> 
<span class='line'>262</span> </span><span class="WHIT">    </span><span class="NAME">t.rendNodeLabel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.rendNode.childNodes</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">childNodes</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>263</span> </span><span class="WHIT">    </span><span class="NAME">t.rendNodeInput</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.rendNode.childNodes</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">childNodes</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>264</span> </span><span class="WHIT">    </span><span class="COMM">// t.rendNodeLabel.innerHTML = parents[3];</span><span class="WHIT">
<span class='line'>265</span> </span><span class="WHIT">    </span><span class="NAME">t.rendNodeInput.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parents</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>266</span> </span><span class="WHIT">    </span><span class="NAME">t.rendNodeTag</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.rendNodeInput</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Needed for unified treatment in setAttribute</span><span class="WHIT">
<span class='line'>267</span> </span><span class="WHIT">    </span><span class="NAME">t.rendNodeTag.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">attr.disabled</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>268</span> </span><span class="WHIT">    </span><span class="NAME">t.rendNodeLabel.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.rendNode.id</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"_label"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>269</span> </span><span class="WHIT">    </span><span class="NAME">t.rendNodeInput.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.rendNode.id</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"_input"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>270</span> 
<span class='line'>271</span> </span><span class="WHIT">    </span><span class="COMM">// 2. Set parents[3] (string|function) as label of the input element.</span><span class="WHIT">
<span class='line'>272</span> </span><span class="WHIT">    </span><span class="COMM">// abstract.js selects the correct DOM element for the update</span><span class="WHIT">
<span class='line'>273</span> </span><span class="WHIT">    </span><span class="NAME">t.setText</span><span class="PUNC">(</span><span class="NAME">parents</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>274</span> 
<span class='line'>275</span> </span><span class="WHIT">    </span><span class="NAME">t._value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parents</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>276</span> 
<span class='line'>277</span> </span><span class="WHIT">     </span><span class="COMM">/**
<span class='line'>278</span>      * @class
<span class='line'>279</span>      * @ignore
<span class='line'>280</span>      */</span><span class="WHIT">
<span class='line'>281</span> </span><span class="WHIT">    </span><span class="NAME">t.update</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>282</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.needsUpdate</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>283</span> </span><span class="WHIT">            </span><span class="NAME">JXG.Text.prototype.update.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>284</span> </span><span class="WHIT">            </span><span class="NAME">this._value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.rendNodeInput.value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>285</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>286</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>287</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>288</span> 
<span class='line'>289</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>290</span>      * Returns the value (content) of the input element
<span class='line'>291</span>      * @name Value
<span class='line'>292</span>      * @memberOf Input.prototype
<span class='line'>293</span>      * @function
<span class='line'>294</span>      * @returns {String} content of the input field.
<span class='line'>295</span>      */</span><span class="WHIT">
<span class='line'>296</span> </span><span class="WHIT">    </span><span class="NAME">t.Value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>297</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>298</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>299</span> 
<span class='line'>300</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>301</span>      * Sets value of the input element.
<span class='line'>302</span>      * @name set
<span class='line'>303</span>      * @memberOf Input.prototype
<span class='line'>304</span>      * @function
<span class='line'>305</span>      *
<span class='line'>306</span>      * @param {String} val
<span class='line'>307</span>      * @returns {JXG.GeometryElement} Reference to the element.
<span class='line'>308</span>      *
<span class='line'>309</span>      * @example
<span class='line'>310</span>      *         var i1 = board.create('input', [-3, 4, 'sin(x)', 'f(x)='], {cssStyle: 'width:4em', maxlength: 2});
<span class='line'>311</span>      *         var c1 = board.create('checkbox', [-3, 2, 'label 1'], {});
<span class='line'>312</span>      *         var b1 = board.create('button', [-3, -1, 'Change texts', function () {
<span class='line'>313</span>      *                 i1.setText('g(x)');
<span class='line'>314</span>      *                 i1.set('cos(x)');
<span class='line'>315</span>      *                 c1.setText('label 2');
<span class='line'>316</span>      *                 b1.setText('Texts are changed');
<span class='line'>317</span>      *             }],
<span class='line'>318</span>      *             {cssStyle: 'width:400px'});
<span class='line'>319</span>      *
<span class='line'>320</span>      * &lt;/pre>&lt;div id="JXG11cac8ff-2354-47e7-9da4-eb298e53de05" class="jxgbox" style="width: 300px; height: 300px;">&lt;/div>
<span class='line'>321</span>      * &lt;script type="text/javascript">
<span class='line'>322</span>      *     (function() {
<span class='line'>323</span>      *         var board = JXG.JSXGraph.initBoard('JXG11cac8ff-2354-47e7-9da4-eb298e53de05',
<span class='line'>324</span>      *             {boundingbox: [-8, 8, 8,-8], axis: true, showcopyright: false, shownavigation: false});
<span class='line'>325</span>      *             var i1 = board.create('input', [-3, 4, 'sin(x)', 'f(x)='], {cssStyle: 'width:4em', maxlength: 2});
<span class='line'>326</span>      *             var c1 = board.create('checkbox', [-3, 2, 'label 1'], {});
<span class='line'>327</span>      *             var b1 = board.create('button', [-3, -1, 'Change texts', function () {
<span class='line'>328</span>      *                     i1.setText('g(x)');
<span class='line'>329</span>      *                     i1.set('cos(x)');
<span class='line'>330</span>      *                     c1.setText('label 2');
<span class='line'>331</span>      *                     b1.setText('Texts are changed');
<span class='line'>332</span>      *                 }],
<span class='line'>333</span>      *                 {cssStyle: 'width:400px'});
<span class='line'>334</span>      *
<span class='line'>335</span>      *     })();
<span class='line'>336</span>      *
<span class='line'>337</span>      * &lt;/script>&lt;pre>
<span class='line'>338</span>      *
<span class='line'>339</span>      */</span><span class="WHIT">
<span class='line'>340</span> 
<span class='line'>341</span> </span><span class="WHIT">     </span><span class="COMM">/**
<span class='line'>342</span>      * @class
<span class='line'>343</span>      * @ignore
<span class='line'>344</span>      */</span><span class="WHIT">
<span class='line'>345</span> 
<span class='line'>346</span> </span><span class="WHIT">    </span><span class="NAME">t.set</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">val</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>347</span> </span><span class="WHIT">        </span><span class="NAME">this._value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">val</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>348</span> </span><span class="WHIT">        </span><span class="NAME">this.rendNodeInput.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">val</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>349</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>350</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>351</span> 
<span class='line'>352</span> </span><span class="WHIT">    </span><span class="NAME">Env.addEvent</span><span class="PUNC">(</span><span class="NAME">t.rendNodeInput</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">priv.InputInputEventHandler</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>353</span> </span><span class="WHIT">    </span><span class="NAME">Env.addEvent</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>354</span> </span><span class="WHIT">        </span><span class="NAME">t.rendNodeInput</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>355</span> </span><span class="WHIT">        </span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>356</span> </span><span class="WHIT">        </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">evt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>357</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Type.exists</span><span class="PUNC">(</span><span class="NAME">evt.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>358</span> </span><span class="WHIT">                </span><span class="NAME">evt.stopPropagation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>359</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>360</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>361</span> </span><span class="WHIT">        </span><span class="NAME">t</span><span class="WHIT">
<span class='line'>362</span> </span><span class="WHIT">    </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>363</span> </span><span class="WHIT">    </span><span class="NAME">Env.addEvent</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>364</span> </span><span class="WHIT">        </span><span class="NAME">t.rendNodeInput</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>365</span> </span><span class="WHIT">        </span><span class="STRN">"touchstart"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>366</span> </span><span class="WHIT">        </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">evt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>367</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Type.exists</span><span class="PUNC">(</span><span class="NAME">evt.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>368</span> </span><span class="WHIT">                </span><span class="NAME">evt.stopPropagation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>369</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>370</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>371</span> </span><span class="WHIT">        </span><span class="NAME">t</span><span class="WHIT">
<span class='line'>372</span> </span><span class="WHIT">    </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>373</span> </span><span class="WHIT">    </span><span class="NAME">Env.addEvent</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>374</span> </span><span class="WHIT">        </span><span class="NAME">t.rendNodeInput</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>375</span> </span><span class="WHIT">        </span><span class="STRN">"pointerdown"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>376</span> </span><span class="WHIT">        </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">evt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>377</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Type.exists</span><span class="PUNC">(</span><span class="NAME">evt.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>378</span> </span><span class="WHIT">                </span><span class="NAME">evt.stopPropagation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>379</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>380</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>381</span> </span><span class="WHIT">        </span><span class="NAME">t</span><span class="WHIT">
<span class='line'>382</span> </span><span class="WHIT">    </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>383</span> 
<span class='line'>384</span> </span><span class="WHIT">    </span><span class="COMM">// This sets the font-size of the input HTML element</span><span class="WHIT">
<span class='line'>385</span> </span><span class="WHIT">    </span><span class="NAME">t.visPropOld.fontsize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"0px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>386</span> </span><span class="WHIT">    </span><span class="NAME">board.renderer.updateTextStyle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>387</span> 
<span class='line'>388</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>389</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>390</span> 
<span class='line'>391</span> </span><span class="NAME">JXG.registerElement</span><span class="PUNC">(</span><span class="STRN">"input"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">JXG.createInput</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>392</span> 
<span class='line'>393</span> </span><span class="COMM">// export default {</span><span class="WHIT">
<span class='line'>394</span> </span><span class="COMM">//     createInput: JXG.createInput</span><span class="WHIT">
<span class='line'>395</span> </span><span class="COMM">// };</span><span class="WHIT">
<span class='line'>396</span> </span></pre></body></html>